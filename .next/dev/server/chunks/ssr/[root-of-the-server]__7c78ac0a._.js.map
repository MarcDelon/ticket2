{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marcn/OneDrive/Desktop/v0-event-ticket-app-main/app/admin/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { ArrowLeft, Trash2, Eye, EyeOff } from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface Ticket {\n  id: string\n  eventName: string\n  participantName: string\n  date: string\n  qrCode: string\n  status: \"valid\" | \"used\"\n  createdAt: Date\n}\n\nexport default function AdminPage() {\n  const [tickets, setTickets] = useState<Ticket[]>([])\n  const [scannedTickets, setScannedTickets] = useState<string[]>([])\n  const [filter, setFilter] = useState<\"all\" | \"valid\" | \"used\">(\"all\")\n  const [showStats, setShowStats] = useState(false)\n\n  useEffect(() => {\n    loadTickets()\n    const interval = setInterval(loadTickets, 1000)\n    return () => clearInterval(interval)\n  }, [])\n\n  const loadTickets = () => {\n    const allTickets = JSON.parse(localStorage.getItem(\"tickets\") || \"[]\")\n    const scanned = JSON.parse(localStorage.getItem(\"scannedTickets\") || \"[]\")\n    setScannedTickets(scanned)\n    setTickets(allTickets)\n  }\n\n  const filteredTickets = tickets.filter((ticket) => {\n    const isUsed = scannedTickets.includes(ticket.id)\n    if (filter === \"all\") return true\n    if (filter === \"valid\") return !isUsed\n    if (filter === \"used\") return isUsed\n    return true\n  })\n\n  const deleteTicket = (id: string) => {\n    const updated = tickets.filter((t) => t.id !== id)\n    localStorage.setItem(\"tickets\", JSON.stringify(updated))\n    setTickets(updated)\n  }\n\n  const revokeTicket = (id: string) => {\n    const scanned = JSON.parse(localStorage.getItem(\"scannedTickets\") || \"[]\")\n    if (!scanned.includes(id)) {\n      scanned.push(id)\n      localStorage.setItem(\"scannedTickets\", JSON.stringify(scanned))\n      setScannedTickets(scanned)\n    }\n  }\n\n  const stats = {\n    total: tickets.length,\n    used: scannedTickets.length,\n    valid: tickets.length - scannedTickets.length,\n  }\n\n  return (\n    <main className=\"min-h-screen bg-white\">\n      {/* Header */}\n      <header className=\"border-b border-gray-200 bg-white sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between gap-2 flex-wrap\">\n          <Link\n            href=\"/\"\n            className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors flex-shrink-0 font-light text-sm sm:text-base\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Back</span>\n          </Link>\n          <h1 className=\"text-base sm:text-lg font-light text-gray-900 text-center flex-1 tracking-tight\">\n            Admin Dashboard\n          </h1>\n          <button\n            onClick={() => setShowStats(!showStats)}\n            className=\"flex items-center gap-2 px-3 sm:px-4 py-2 rounded border border-gray-300 hover:bg-gray-50 text-gray-700 transition-colors text-xs sm:text-sm font-medium flex-shrink-0\"\n          >\n            {showStats ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n            <span className=\"hidden sm:inline\">{showStats ? \"Hide\" : \"Show\"}</span>\n            <span className=\"sm:hidden text-xs\">{showStats ? \"Hide\" : \"Show\"}</span>\n          </button>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-8\">\n        {/* Stats */}\n        {showStats && (\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-6 mb-6 sm:mb-8\">\n            <div className=\"p-5 sm:p-6 rounded border border-gray-200 bg-gray-50\">\n              <div className=\"text-xs text-gray-600 mb-2 font-light\">Total Tickets</div>\n              <div className=\"text-2xl sm:text-3xl font-light text-gray-900\">{stats.total}</div>\n            </div>\n            <div className=\"p-5 sm:p-6 rounded border border-gray-200 bg-gray-50\">\n              <div className=\"text-xs text-gray-600 mb-2 font-light\">Used</div>\n              <div className=\"text-2xl sm:text-3xl font-light text-amber-600\">{stats.used}</div>\n            </div>\n            <div className=\"p-5 sm:p-6 rounded border border-gray-200 bg-gray-50\">\n              <div className=\"text-xs text-gray-600 mb-2 font-light\">Valid</div>\n              <div className=\"text-2xl sm:text-3xl font-light text-blue-600\">{stats.valid}</div>\n            </div>\n          </div>\n        )}\n\n        {/* Filters */}\n        <div className=\"flex gap-2 mb-6 flex-wrap\">\n          {([\"all\", \"valid\", \"used\"] as const).map((f) => (\n            <button\n              key={f}\n              onClick={() => setFilter(f)}\n              className={`px-3 sm:px-4 py-2 rounded font-medium transition-all text-xs sm:text-sm ${\n                filter === f ? \"bg-blue-600 text-white\" : \"border border-gray-300 text-gray-700 hover:bg-gray-50\"\n              }`}\n            >\n              {f.charAt(0).toUpperCase() + f.slice(1)}\n            </button>\n          ))}\n        </div>\n\n        {/* Tickets Table */}\n        <div className=\"rounded border border-gray-200 overflow-hidden bg-white\">\n          {filteredTickets.length === 0 ? (\n            <div className=\"p-6 sm:p-8 text-center\">\n              <p className=\"text-gray-600 text-xs sm:text-sm font-light\">No tickets found</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-xs sm:text-sm\">\n                <thead>\n                  <tr className=\"border-b border-gray-200 bg-gray-50\">\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-left font-medium text-gray-900\">Ticket ID</th>\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-left font-medium text-gray-900\">Participant</th>\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-left font-medium text-gray-900 hidden sm:table-cell\">\n                      Event\n                    </th>\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-left font-medium text-gray-900 hidden md:table-cell\">\n                      Date\n                    </th>\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-left font-medium text-gray-900\">Status</th>\n                    <th className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-right font-medium text-gray-900\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTickets.map((ticket) => {\n                    const isUsed = scannedTickets.includes(ticket.id)\n                    // Utiliser une clé composite pour garantir l'unicité\n                    // Gérer le cas où createdAt pourrait être une chaîne de caractères\n                    const createdAtTime = typeof ticket.createdAt === 'string' \n                      ? new Date(ticket.createdAt).getTime() \n                      : ticket.createdAt.getTime();\n                    const rowKey = `${ticket.id}-${createdAtTime}`;\n                    return (\n                      <tr key={rowKey} className=\"border-b border-gray-200 hover:bg-gray-50 transition-colors\">\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-gray-900 font-mono truncate text-xs\">\n                          {ticket.id.substring(0, 10)}...\n                        </td>\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-gray-900 truncate text-xs\">\n                          {ticket.participantName}\n                        </td>\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-gray-600 hidden sm:table-cell truncate text-xs\">\n                          {ticket.eventName}\n                        </td>\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-gray-600 hidden md:table-cell text-xs\">\n                          {new Date(ticket.date).toLocaleDateString()}\n                        </td>\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3\">\n                          <span\n                            className={`inline-block px-2 py-1 rounded text-xs font-medium ${\n                              isUsed ? \"bg-amber-100 text-amber-800\" : \"bg-blue-100 text-blue-800\"\n                            }`}\n                          >\n                            {isUsed ? \"Used\" : \"Valid\"}\n                          </span>\n                        </td>\n                        <td className=\"px-3 sm:px-6 py-2.5 sm:py-3 text-right\">\n                          <div className=\"flex items-center justify-end gap-2 flex-wrap\">\n                            {!isUsed && (\n                              <button\n                                onClick={() => revokeTicket(ticket.id)}\n                                className=\"px-2 py-1 text-xs rounded border border-amber-300 bg-amber-50 text-amber-700 hover:bg-amber-100 transition-colors font-medium whitespace-nowrap\"\n                              >\n                                Revoke\n                              </button>\n                            )}\n                            <button\n                              onClick={() => deleteTicket(ticket.id)}\n                              className=\"px-2 py-1 text-xs rounded border border-red-300 bg-red-50 text-red-700 hover:bg-red-100 transition-colors font-medium whitespace-nowrap\"\n                            >\n                              <Trash2 className=\"w-3 h-3 inline mr-1\" />\n                              Delete\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    )\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAW,EAAE;IACjE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAA2B;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAC;IAE3C,IAAA,iVAAS,EAAC;QACR;QACA,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,aAAa,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;QACjE,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,qBAAqB;QACrE,kBAAkB;QAClB,WAAW;IACb;IAEA,MAAM,kBAAkB,QAAQ,MAAM,CAAC,CAAC;QACtC,MAAM,SAAS,eAAe,QAAQ,CAAC,OAAO,EAAE;QAChD,IAAI,WAAW,OAAO,OAAO;QAC7B,IAAI,WAAW,SAAS,OAAO,CAAC;QAChC,IAAI,WAAW,QAAQ,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,UAAU,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC/C,aAAa,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC;QAC/C,WAAW;IACb;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,qBAAqB;QACrE,IAAI,CAAC,QAAQ,QAAQ,CAAC,KAAK;YACzB,QAAQ,IAAI,CAAC;YACb,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;YACtD,kBAAkB;QACpB;IACF;IAEA,MAAM,QAAQ;QACZ,OAAO,QAAQ,MAAM;QACrB,MAAM,eAAe,MAAM;QAC3B,OAAO,QAAQ,MAAM,GAAG,eAAe,MAAM;IAC/C;IAEA,qBACE,6WAAC;QAAK,WAAU;;0BAEd,6WAAC;gBAAO,WAAU;0BAChB,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC,sSAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,6WAAC,iTAAS;oCAAC,WAAU;;;;;;8CACrB,6WAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,6WAAC;4BAAG,WAAU;sCAAkF;;;;;;sCAGhG,6WAAC;4BACC,SAAS,IAAM,aAAa,CAAC;4BAC7B,WAAU;;gCAET,0BAAY,6WAAC,wSAAM;oCAAC,WAAU;;;;;yDAAe,6WAAC,2RAAG;oCAAC,WAAU;;;;;;8CAC7D,6WAAC;oCAAK,WAAU;8CAAoB,YAAY,SAAS;;;;;;8CACzD,6WAAC;oCAAK,WAAU;8CAAqB,YAAY,SAAS;;;;;;;;;;;;;;;;;;;;;;;0BAKhE,6WAAC;gBAAI,WAAU;;oBAEZ,2BACC,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;wCAAI,WAAU;kDAAwC;;;;;;kDACvD,6WAAC;wCAAI,WAAU;kDAAiD,MAAM,KAAK;;;;;;;;;;;;0CAE7E,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;wCAAI,WAAU;kDAAwC;;;;;;kDACvD,6WAAC;wCAAI,WAAU;kDAAkD,MAAM,IAAI;;;;;;;;;;;;0CAE7E,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;wCAAI,WAAU;kDAAwC;;;;;;kDACvD,6WAAC;wCAAI,WAAU;kDAAiD,MAAM,KAAK;;;;;;;;;;;;;;;;;;kCAMjF,6WAAC;wBAAI,WAAU;kCACZ,AAAC;4BAAC;4BAAO;4BAAS;yBAAO,CAAW,GAAG,CAAC,CAAC,kBACxC,6WAAC;gCAEC,SAAS,IAAM,UAAU;gCACzB,WAAW,CAAC,wEAAwE,EAClF,WAAW,IAAI,2BAA2B,yDAC1C;0CAED,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC;+BANhC;;;;;;;;;;kCAYX,6WAAC;wBAAI,WAAU;kCACZ,gBAAgB,MAAM,KAAK,kBAC1B,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAE,WAAU;0CAA8C;;;;;;;;;;iDAG7D,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAM,WAAU;;kDACf,6WAAC;kDACC,cAAA,6WAAC;4CAAG,WAAU;;8DACZ,6WAAC;oDAAG,WAAU;8DAAkE;;;;;;8DAChF,6WAAC;oDAAG,WAAU;8DAAkE;;;;;;8DAChF,6WAAC;oDAAG,WAAU;8DAAuF;;;;;;8DAGrG,6WAAC;oDAAG,WAAU;8DAAuF;;;;;;8DAGrG,6WAAC;oDAAG,WAAU;8DAAkE;;;;;;8DAChF,6WAAC;oDAAG,WAAU;8DAAmE;;;;;;;;;;;;;;;;;kDAGrF,6WAAC;kDACE,gBAAgB,GAAG,CAAC,CAAC;4CACpB,MAAM,SAAS,eAAe,QAAQ,CAAC,OAAO,EAAE;4CAChD,qDAAqD;4CACrD,mEAAmE;4CACnE,MAAM,gBAAgB,OAAO,OAAO,SAAS,KAAK,WAC9C,IAAI,KAAK,OAAO,SAAS,EAAE,OAAO,KAClC,OAAO,SAAS,CAAC,OAAO;4CAC5B,MAAM,SAAS,GAAG,OAAO,EAAE,CAAC,CAAC,EAAE,eAAe;4CAC9C,qBACE,6WAAC;gDAAgB,WAAU;;kEACzB,6WAAC;wDAAG,WAAU;;4DACX,OAAO,EAAE,CAAC,SAAS,CAAC,GAAG;4DAAI;;;;;;;kEAE9B,6WAAC;wDAAG,WAAU;kEACX,OAAO,eAAe;;;;;;kEAEzB,6WAAC;wDAAG,WAAU;kEACX,OAAO,SAAS;;;;;;kEAEnB,6WAAC;wDAAG,WAAU;kEACX,IAAI,KAAK,OAAO,IAAI,EAAE,kBAAkB;;;;;;kEAE3C,6WAAC;wDAAG,WAAU;kEACZ,cAAA,6WAAC;4DACC,WAAW,CAAC,mDAAmD,EAC7D,SAAS,gCAAgC,6BACzC;sEAED,SAAS,SAAS;;;;;;;;;;;kEAGvB,6WAAC;wDAAG,WAAU;kEACZ,cAAA,6WAAC;4DAAI,WAAU;;gEACZ,CAAC,wBACA,6WAAC;oEACC,SAAS,IAAM,aAAa,OAAO,EAAE;oEACrC,WAAU;8EACX;;;;;;8EAIH,6WAAC;oEACC,SAAS,IAAM,aAAa,OAAO,EAAE;oEACrC,WAAU;;sFAEV,6WAAC,wSAAM;4EAAC,WAAU;;;;;;wEAAwB;;;;;;;;;;;;;;;;;;;+CApCzC;;;;;wCA2Cb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlB"}}]
}